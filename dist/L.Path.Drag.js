"use strict";L.Path.include({_applyTranslation:function(t,a){var i=[];this.getLatLngs().forEach(function(n){i.push(L.latLng(n.lat-a,n.lng-t))});this.setLatLngs(i);this.redraw()},_onMouseClick:function(t){if(this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()){return}this._fireMouseEvent(t)}});"use strict";L.Handler.PathDrag=L.Handler.extend({initialize:function(t){this._path=t;this._startLatLng=null;this._dragStartLng=null},addHooks:function(){this._path.on("mousedown",this._onDragStart,this);if(!L.Path.CANVAS){L.DomUtil.addClass(this._path._container,"leaflet-path-draggable")}},removeHooks:function(){this._path.off("mousedown",this._onDragStart,this);if(!L.Path.CANVAS){L.DomUtil.removeClass(this._path._container,"leaflet-path-draggable")}},moved:function(){return this._path._dragMoved},_onDragStart:function(t){this._startLatLng=L.latLng(t.latlng.lat,t.latlng.lng);this._dragStartLng=L.latLng(t.latlng.lat,t.latlng.lng);this._path._map.on("mousemove",this._onDrag,this).on("mouseup",this._onDragEnd,this);this._path._dragMoved=false},_onDrag:function(t){var a=t.latlng.lng;var i=t.latlng.lat;var n=this._startLatLng.lng-a;var s=this._startLatLng.lat-i;if(!this._path._dragMoved&&(n||s)){this._path._dragMoved=true;this._path.fire("dragstart",{latLng:this._startLatLng});if(this._path._popup){this._path._popup._close();this._path.off("click",this._path._openPopup,this._path)}}this._startLatLng=L.latLng(i,a);if(!this._path.options.draggable.eventsOnly){this._path._applyTranslation(n,s)}this._path.fire("drag",{latLng:t.latlng});L.DomEvent.stop(t.originalEvent)},_onDragEnd:function(t){L.DomEvent.stop(t);this._path._map.off("mousemove",this._onDrag,this).off("mouseup",this._onDragEnd,this);this._path.fire("dragend",{latLng:t.latlng});if(this._path._popup){L.Util.requestAnimFrame(function(){this._path.on("click",this._path._openPopup,this._path)},this)}this._startLatLng=null;this._dragStartLng=null;this._path._dragMoved=false}});L.Path.prototype.__initEvents=L.Path.prototype._initEvents;L.Path.prototype._initEvents=function(){this.__initEvents();if(this.options.draggable){if(this.dragging){this.dragging.enable()}else{this.dragging=new L.Handler.PathDrag(this);this.dragging.enable()}}else if(this.dragging){this.dragging.disable()}};(function(){L.FeatureGroup.EVENTS+=" dragstart";function t(t,a,i){for(var n=0,s=t.length;n<s;n++){var r=t[n];r.prototype["_"+a]=r.prototype[a];r.prototype[a]=i}}function a(t){if(this.hasLayer(t)){return this}t.on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);return this._addLayer.call(this,t)}function i(t){if(!this.hasLayer(t)){return this}t.off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);return this._removeLayer.call(this,t)}t([L.MultiPolygon,L.MultiPolyline],"addLayer",a);t([L.MultiPolygon,L.MultiPolyline],"removeLayer",i);var n={_onDrag:function(t){var a=t.target;this.eachLayer(function(t){if(t!==a){t._applyTransform(a.dragging._matrix)}});this._propagateEvent(t)},_onDragEnd:function(t){var a=t.target;this.eachLayer(function(t){if(t!==a){t._resetTransform();t.dragging._transformPoints(a.dragging._matrix)}});this._propagateEvent(t)}};L.MultiPolygon.include(n);L.MultiPolyline.include(n)})();